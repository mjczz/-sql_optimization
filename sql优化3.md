### 业务场景
查询资源对应的跟进记录

### 原sql
```sql
statement: SELECT *
FROM "nice_crm2_follow"
WHERE "student_id" IN('74939', '282698', '282707', '282706', '282702', '282697', '282700', '282703', '282701', '282696', '282699', '282704', '282695', '282713', '282729', '282726', '282711', '282717', '282714', '282710', '282718', '282720', '282724', '282727', '282721', '282712', '282731', '282716', '282709', '282732', '282722', '282725', '282730', '282723', '282715', '282728', '282733', '282735', '282736', '282734', '282737', '282738', '282739', '282752', '282758', '282749', '282741', '282743', '282767', '282755', '282760', '282748', '282753', '282763', '282766', '282744', '282762', '282764', '282750', '282757', '282751', '282761', '282740', '282765', '282742', '282747', '282746', '282756', '282759', '282754', '282773', '282783', '282772', '282777', '282782', '282778', '282769', '282779', '282775', '282780', '282771', '282781', '282768', '282770', '282776', '282774', '282791', '38110', '22196', '80891', '80724', '87002', '21084', '61143', '50765', '50729', '50764', '50741', '80862', '50809', '61054', '80786', '70170', '34128', '65844', '65850', '66175', '65852', '65862')
```

### 查询计划分析

```sql
Seq Scan on nice_crm2_follow  (cost=0.00..225971.96 rows=1205 width=78) (actual time=54.252..1112.725 rows=5 loops=1)
  Filter: (student_id = ANY ('{74939,282698,282707,282706,282702,282697,282700,282703,282701,282696,282699,282704,282695,282713,282729,282726,282711,282717,282714,282710,282718,282720,282724,282727,282721,282712,282731,282716,282709,282732,282722,282725,282730,282723,282715,282728,282733,282735,282736,282734,282737,282738,282739,282752,282758,282749,282741,282743,282767,282755,282760,282748,282753,282763,282766,282744,282762,282764,282750,282757,282751,282761,282740,282765,282742,282747,282746,282756,282759,282754,282773,282783,282772,282777,282782,282778,282769,282779,282775,282780,282771,282781,282768,282770,282776,282774,282791,38110,22196,80891,80724,87002,21084,61143,50765,50729,50764,50741,33450,30175,30178,33453,66044,30720,30158,30157,30382,30359,30696,30684,30672,30671,30643,30033,30407,30127,29859,29851,29846,29815,29787,30733,30145,30089}'::integer[]))
  Rows Removed by Filter: 823441

Planning time: 0.574 ms
Execution time: 1112.757 ms
```

### 分析
此sql目的是在查询资源信息后，查询对应资源的跟进记录。
可通过传入更多参数来提升查询性能。

### 解决方案
在业务层代码家人city和campus参数即可。

### 优化后的sql
```sql
SELECT * FROM "nice_crm2_follow"
WHERE city = '7' and campus = '702' and
"student_id" IN('74939', '282698', '282707', '282706', '282702', '282697', '282700', '282703', '282701', '282696', '282699', '282704', '282695', '282713', '282729', '282726', '282711', '282717', '282714', '282710', '282718', '282720', '282724', '282727', '282721', '282712', '282731', '282716', '282709', '282732', '282722', '282725', '282730', '282723', '282715', '282728', '282733', '282735', '282736', '282734', '282737', '282738', '282739', '282752', '282758', '282749', '282741', '282743', '282767', '282755', '282760', '282748', '282753', '282763', '282766', '282744', '282762', '282764', '282750', '282757', '282751', '282761', '282740', '282765', '282742', '282747', '282746', '282756', '282759', '282754', '282773', '282783', '282772', '282777', '282782', '282778', '282769', '282779', '282775', '282780', '282771', '282781', '282768', '282770', '282776', '282774', '282791', '38110', '22196', '80891', '80724', '87002', '21084', '61143', '50765', '50729', '50764', '50741', '80862', '50809', '61054', '80786', '70170', '34128', '65844', '65850', '66175', '65852', '65862', '66183', '30432', '31016', '32667', '32669', '31019', '66204', '32665', '32659', '31923', '31922', '30076', '30065', '30052', '30051', '32652', '32647', '32684', '32508', '31273', '32514', '32562', '31277', '65896', '30439', '32101', '32691', '32705', '32866', '32728', '32754', '65915', '66124', '32767', '33243', '65937', '33299', '33322', '65953', '66126', '30442', '30509', '30776', '65956', '33385', '31872', '65991', '66127', '33269', '33272', '65993', '33284', '33402', '65994', '66136', '30444', '29692', '30758', '33405', '33415', '65997', '33433', '33438', '66027', '33490', '33450', '30175', '30178', '33453', '66044', '30720', '30158', '30157', '30382', '30359', '30696', '30684', '30672', '30671', '30643', '30033', '30407', '30127', '29859', '29851', '29846', '29815', '29787', '30733', '30145', '30089')
```

### 优化后的sql查询计划分析

```sql
Seq Scan on nice_crm2_follow  (cost=0.00..230089.19 rows=1 width=78) (actual time=10.224..196.501 rows=5 loops=1)
  Filter: ((city = 7) AND (campus = 702) AND (student_id = ANY ('{74939,282698,282707,282706,282702,282697,282700,282703,282701,282696,282699,282704,282695,282713,282729,282726,282711,282717,282714,282710,282718,282720,282724,282727,282721,282712,282731,282716,282709,282732,282722,282725,282730,282723,282715,282728,282733,282735,282736,282734,282737,282738,282739,282752,282758,282749,282741,282743,282767,282755,282760,282748,282753,282763,282766,282744,282762,282764,282750,282757,282751,282761,282740,282765,282742,282747,282746,282756,282759,282754,282773,282783,282772,282777,282782,282778,282769,282779,282775,282780,282771,282781,282768,282770,282776,282774,282791,38110,22196,80891,80724,87002,21084,61143,50765,50729,50764,50741,80862,50809,61054,80786,70170,34128,65844,65850,66175,65852,65862,66183,30432,31016,32667,32669,31019,66204,32665,32659,31923,31922,30076,30065,30052,30051,32652,32647,32684,32508,31273,32514,32562,31277,65896,30439,32101,32691,32705,32866,32728,32754,65915,66124,32767,33243,65937,33299,33322,65953,66126,30442,30509,30776,65956,33385,31872,65991,66127,33269,33272,65993,33284,33402,65994,66136,30444,29692,30758,33405,33415,65997,33433,33438,66027,33490,33450,30175,30178,33453,66044,30720,30158,30157,30382,30359,30696,30684,30672,30671,30643,30033,30407,30127,29859,29851,29846,29815,29787,30733,30145,30089}'::integer[])))
  Rows Removed by Filter: 823441
Planning time: 0.477 ms
Execution time: 196.534 ms
```

